<!DOCTYPE html>
<html lang="{{ site.Language.LanguageCode }}" {{- if eq site.Language.LanguageDirection "rtl" }} dir="rtl" {{- end }}>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    {{/* NOTE: the Site's title, and if there is a page title, that is set too */}}
    <title>{{ block "title" . }}{{ with .Params.Title }}{{ . }} | {{ end }}{{ .Site.Title }}{{ end }}</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end }}">
    {{ hugo.Generator }}
    {{ $production := hugo.IsProduction }}
    {{ $public := not .Params.private }}
    {{ if and $production $public }}
      <meta name="robots" content="index, follow">
    {{ else }}
      <meta name="robots" content="noindex, nofollow">
    {{ end }}

    {{ partials.Include "style.html" . }}
    {{ partials.Include "scripts.html" . }}

    {{ block "favicon" . }}
      {{ partials.IncludeCached "favicon.html" . }}
    {{ end }}

    {{ if .Params.canonicalUrl }}
      <link rel="canonical" href="{{ .Params.canonicalUrl }}">
    {{ else }}
      <link rel="canonical" href="{{ .Permalink }}">
    {{ end }}

    {{/* NOTE: These Hugo Internal Templates can be found starting at https://github.com/gohugoio/hugo/tree/master/tpl/tplimpl/embedded/templates */}}
    {{- template "_internal/opengraph.html" . -}}
    {{- template "_internal/schema.html" . -}}
    {{- template "_internal/twitter_cards.html" . -}}

    {{ if hugo.IsProduction }}
      {{ template "_internal/google_analytics.html" . }}
    {{ end }}
  </head>

  {{- $environment := hugo.Environment | compare.Default "production" -}}
  <body class="{{ $.Param "body_classes"  | compare.Default "avenir bg-white"}} {{ $environment }}">

    {{ partials.IncludeCached "header.html" .}}
    {{ partials.IncludeCached "navigation.html" .}}
    {{ partials.IncludeCached "components/to-google.html" .}}
    <main role="main">
      {{ block "main" . }}{{ end }}
    </main>
    {{ partials.IncludeCached "footer.html" . }}
  </body>
</html>
